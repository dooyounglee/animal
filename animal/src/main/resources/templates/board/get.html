<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<th:block th:insert="~{fragments/head::head}"></th:block>
<body class="fix-header card-no-border logo-center">
	<!-- Preloader - style you can find in spinners.css -->
 	<th:block th:insert="~{fragments/head::preloader}"></th:block>
	<!-- End of Preloader - style you can find in spinners.css -->
	
	<!-- Main wrapper -->
	<div id="main-wrapper">
	
		<!-- Topbar header - style you can find in pages.scss -->
	        <header class="topbar">
	        	<th:block th:insert="~{fragments/header::header}"></th:block>
	        </header>
	    <!-- End Topbar header -->
	    
	    <!-- Left-sidebar -->
        <aside class="left-sidebar">
			<th:block th:insert="~{fragments/menu::menu}"></th:block>
        </aside>
        <!-- End of Left-sidebar -->
        
        <!-- Page wrapper  -->
        <div class="page-wrapper">
        
        	<!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Bread crumb and right sidebar toggle -->
                <!-- ============================================================== -->
                <div class="row page-titles">
                    <div class="col-md-5 col-12 align-self-center">
                        <h3 class="text-themecolor mb-0 mt-0">Q&A</h3>
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                            <li class="breadcrumb-item active">Q&A</li>
                        </ol>
                    </div>
                    <div class="col-md-7 col-12 align-self-center d-none d-md-block">
                        <div class="d-flex mt-2 justify-content-end">
                            <div class="d-flex mr-3 ml-2">
                                <div class="chart-text mr-2">
                                    <h6 class="mb-0"><small>THIS MONTH</small></h6>
                                    <h4 class="mt-0 text-info">$58,356</h4>
                                </div>
                                <div class="spark-chart">
                                    <div id="monthchart"></div>
                                </div>
                            </div>
                            <div class="d-flex mr-3 ml-2">
                                <div class="chart-text mr-2">
                                    <h6 class="mb-0"><small>LAST MONTH</small></h6>
                                    <h4 class="mt-0 text-primary">$48,356</h4>
                                </div>
                                <div class="spark-chart">
                                    <div id="lastmonthchart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- End Bread crumb and right sidebar toggle -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                <!-- Row -->
                <div class="row">
                    <!-- Column -->
                    <div class="col-lg-12 col-md-12">
                        <div class="card">
	                        <div class="card-body">
	                        	<a class="btn btn-primary" href="/board/list">list</a>
								<a class="btn btn-primary" href="/board/write">write</a>
								<a class="btn btn-warning" th:attr="href='/board/edit?b_no='+${b.b_no}">edit</a>
								<button id="del" class="btn btn-danger">del</button>
	                            <h4 class="font-medium mt-4">[[${b.title}]]</h4>
	                            <hr>
	                            <th:block th:utext='${b.content}'></th:block>
	                            <hr>
	                            <form class="form-material mt-4 row" action="/reply/write" method="post">
                                    <div class="form-group col-md-2 mt-3">
                                        <input type="text" name="replyer" class="form-control form-control-line"
                                        	th:value="${#authentication.principal} eq 'anonymousUser'?'anonymousUser':${#authentication.principal.member.email}"
                                        	th:readonly="${#authentication.principal} eq 'anonymousUser'?'':'true'">
                                    </div>
                                    <div class="form-group col-md-9 mt-3">
                                        <input type="text" name="replyText" class="form-control" placeholder="내용을 입력하세요">
                                    </div>
									<div class="form-group col-md-1 mt-3">
										<button class="btn btn-success">write</button>
									</div>
                                    <input type=hidden name="b_no" th:value="${b.b_no}" readonly>
									<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                </form>
	                            <th:block th:each="r:${rlist}">
	                            <div class="row">
		                            <h5 class="col-lg-2 col-mt-4">[[${r.animal}]]</h5>
		                            <h6 class="col-lg-8 col-mt-4">[[${r.replyText}]]</h6>
		                            <h6 class="col-lg-2 col-mt-4">[[${r.updatedate}]]</h6>
	                            </div>
								</th:block>
	                        </div>
                        </div>
                    </div>
                    <!-- Column -->
                </div>
                <!-- Row -->
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->

			<!-- footer -->
			<footer class="footer">
				<th:block th:insert="~{fragments/footer::footer}"></th:block>
	        </footer>
			<!--  End of footer -->
	
		</div>
        <!-- End of Page wrapper  -->
        
	</div>
	<!-- End of Main wrapper -->
	
	<form id='f1'>
		<input type="hidden" name="b_no" th:value="${b.b_no}">
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
	</form>
    <script th:inline="javascript">
	var formObj = $("#f1");
    $("#del").click(function(){
		formObj.attr("action","/board/del");
		formObj.attr("method", "post");
		formObj.submit();
	});
    </script>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
	<div th:insert="~{fragments/header::header}"></div>
	<a href="/board/list">list</a>
	<a href="/board/write">write</a><br>
	[[${b}]]<br>
	<a th:attr="href='/board/edit?b_no='+${b.b_no}">edit</a>
	<form action="/board/del" method="post">
		<input type="hidden" name="b_no" th:value="${b.b_no}">
		<button>del</button>
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
	</form>
	<hr>
	<form action="/reply/write" method="post">
		<input name="replyer" th:value="${#authentication.principal} eq 'anonymousUser'?'anonymousUser':${#authentication.principal.member.email}">
		<input name="replyText">
		<input name="b_no" th:value="${b.b_no}">
		<button>write</button>
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
	</form>
	<hr>
	<th:block th:each="r:${rlist}">
		[[${r}]]<br>
	</th:block>
	<div th:insert="~{fragments/footer::footer}"></div>
</body>
</html>